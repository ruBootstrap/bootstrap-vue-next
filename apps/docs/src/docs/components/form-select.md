# Селект формы

<PageHeader>

Кастомный `<select>` Bootstrap с пользовательскими стилями. Опции можно задать массивом, массивом объектов или объектом.

</PageHeader>

## Обзор

Генерируйте опции для select, передавая массив или объект в пропс `options`:

<<< DEMO ./demo/SelectOverview.vue

Вы также можете определить группы опций через пропс `options`:

<<< DEMO ./demo/SelectOptionsGroup.vue

Или задать опции и группы опций вручную:

<<< DEMO ./demo/SelectOptionsManual.vue

Можно свободно комбинировать пропс `options` с `BFormSelectOption` и `BFormSelectOptionGroup`. Вручную размещённые опции и группы появятся _ниже_ тех, что сгенерированы через `options`. Чтобы они были _выше_, используйте именованный слот `first`.

<<< DEMO ./demo/SelectOptionsMixed.vue

## Свойство options

<!--@include: ./_options.md{5,}-->

<<< DEMO ./demo/SelectCustomFields.vue

### Группы опций

Чтобы задать группу опций, добавьте объект с пропсом `label` (название группы) и свойством `options` (массив опций группы).

<<< FRAGMENT ./demo/OptionsGroups.ts#snippet{ts}

### Примечания по опциям

Если начальное значение v-model не совпадает ни с одной из опций, компонент `BFormSelect` (который под капотом является обычным HTML5 `<select>`) будет отображаться в состоянии _без выбора_. На iOS это приведёт к невозможности выбрать первый элемент, так как в этом случае не срабатывает событие change. Поэтому рекомендуется добавлять первую опцию с пустым значением и атрибутом disabled.

```vue-html
<BFormSelect v-model="selected" :options="options">
  <template #first>
    <BFormSelectOption value="" disabled>-- Пожалуйста, выберите опцию --</BFormSelectOption>
  </template>
</BFormSelect>
```

Подробнее см. в [документации Vue по select](https://v3.vuejs.org/guide/forms.html#select).

## Обычный (одиночный) select

По умолчанию применяется кастомное оформление select из Bootstrap v5.

### Значение в одиночном режиме

В режиме без `multiple` компонент `BFormSelect` возвращает значение выбранной опции.

<<< DEMO ./demo/SelectSingleValue.vue

### Размер select (число отображаемых строк)

Вы можете использовать пропс `select-size`, чтобы превратить select в список, а не выпадающее меню. Установите числовое значение больше 1, чтобы контролировать количество видимых строк.

Обратите внимание: если `select-size` больше 1, кастомные стили Bootstrap v5 **не** применяются, если только не установлен пропс `multiple`.

Также не все мобильные браузеры отображают select как список.

<<< DEMO ./demo/SelectSizing.vue

## Множественный выбор

Включите режим множественного выбора, установив пропс `multiple`, и управляйте количеством отображаемых строк через `select-size`. По умолчанию браузер сам определяет количество строк (обычно 4).

### Значение в режиме multiple

В режиме `multiple` компонент `BFormSelect` всегда возвращает массив значений опций. В этом режиме **обязательно** используйте массив в v-model.

<<< DEMO ./demo/SelectMultiValue.vue

## Размеры

Задайте размер текста с помощью пропса `size`: `sm` или `lg` для маленького или большого размера соответственно.

По умолчанию `BFormSelect` занимает всю ширину контейнера. Для управления шириной поместите select в стандартную колонку Bootstrap.

## Автофокус

Если пропс `autofocus` установлен на `BFormSelect`, select будет автоматически в фокусе при вставке (монтировании) в документ или повторной активации внутри компонента Vue `KeepAlive`. Обратите внимание: этот пропс **не** устанавливает атрибут `autofocus` на select и не отслеживает его появление.

## Контекстные состояния

Bootstrap поддерживает стили валидации для состояний `valid` и `invalid` для большинства элементов формы.

Обычно рекомендуется использовать определённое состояние для разных типов обратной связи:

- `false` (некорректное состояние) — для обязательных или блокирующих полей. Пользователь должен корректно заполнить это поле для отправки формы
- `true` (корректное состояние) — для поэтапной валидации, чтобы поощрять пользователя при заполнении формы
- `null` — не отображает состояние валидации

Чтобы применить одну из иконок состояния к `BFormSelect`, установите пропс `state` в `false` (некорректно), `true` (корректно) или `null` (без состояния).

### Передача состояния вспомогательным технологиям и людям с дальтонизмом

Использование только цветовой индикации состояния не даст информации пользователям вспомогательных технологий (например, экранных читалок) и людям с дальтонизмом.

Обеспечьте альтернативную индикацию состояния. Например, добавьте подсказку в текст метки или отдельный блок с пояснением (через `BFormGroup` или `BForm*Feedback`). Для вспомогательных технологий некорректным полям можно добавить атрибут `aria-invalid="true"` (см. ниже).

### ARIA `aria-invalid` атрибут

Если у `BFormSelect` некорректное состояние (`state = false`), рекомендуется также установить пропс `aria-invalid` в `true`.

Поддерживаемые значения `invalid`:

- `false` (по умолчанию) — ошибок нет
- `true` — значение не прошло валидацию

Если `state` равен `false`, aria-invalid также будет установлен в true.

## Обычный select без кастомных стилей

Установите пропс `plain`, чтобы отобразить нативный `<select>` браузера (класс `.form-control` всё равно будет добавлен).

Нативный select всегда будет отображаться для одиночных select с `select-size` больше 1.

<ComponentReference :data="data" />

<script setup lang="ts">
import {data} from '../../data/components/formSelect.data'
</script>
