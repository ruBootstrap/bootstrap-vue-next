# Выпадающий список (Dropdown)

<PageHeader>

Выпадающие списки — это переключаемые контекстные оверлеи для отображения списков ссылок и действий в формате выпадающего меню.

</PageHeader>

Компоненты `BDropdown` — это переключаемые контекстные оверлеи для отображения списков ссылок и других элементов. Они открываются по клику (или по нажатию пробела или Enter при фокусе), а не по наведению; это [осознанное решение в дизайне](https://markdotto.com/2012/02/27/bootstrap-explained-dropdowns/).

<<< DEMO ./demo/DropdownOverview.vue#template{vue-html}

## Содержимое кнопки

Вы можете настроить текст кнопки выпадающего списка с помощью пропса `text` (как показано в предыдущих примерах) или использовать слот `button-content` вместо пропса `text`. Слот `button-content` позволяет использовать базовый HTML и иконки в содержимом кнопки.

Если указаны и пропс `text`, и слот `button-content`, приоритет будет у слота `button-content`.

<<< DEMO ./demo/DropdownButtonContent.vue#template{vue-html}

## Позиционирование

Выпадающий список поддерживает различные варианты позиционирования: выравнивание влево (start) и вправо (end), выпадающее меню вниз и вверх, а также автоматическое переключение между ними, если меню выходит за пределы видимой области экрана.

### Выравнивание меню

Меню выпадающего списка может быть выровнено по _началу_ (по умолчанию) или по _концу_ относительно кнопки. Чтобы выровнять по _концу_, установите пропс `end`.

<<< DEMO ./demo/DropdownMenuAlignment.vue#template{vue-html}

### Dropup

Сделайте выпадающее меню «вверх» (drop-up), установив пропс `placement`.

<<< DEMO ./demo/DropdownDropup.vue#template{vue-html}

### Положение выпадения

Сделайте выпадающее меню влево, вправо или в другое положение, установив пропс `placement`.

Значения для `placement` берутся из [документации floating-ui](https://floating-ui.com/docs/computeposition#placement).

<<< DEMO ./demo/DropdownPlacement.vue#template{vue-html}

### Автоматическое «переворачивание»

По умолчанию выпадающие списки могут автоматически открываться вверх или вниз в зависимости от положения на экране. Чтобы отключить эту функцию, установите пропс `no-flip`.

<<< DEMO ./demo/DropdownNoFlip.vue#template{vue-html}

### Отступ меню

Хотите немного отодвинуть меню от кнопки? Используйте пропс `offset`, чтобы задать количество пикселей для смещения вправо (или влево, если значение отрицательное) от кнопки-переключателя:

<<< DEMO ./demo/DropdownMenuOffset.vue#template{vue-html}

### Floating Strategy

По умолчанию плавающее меню рендерится с использованием _absolute_. Вы можете изменить это, установив пропс `strategy`. Второй возможный вариант — `fixed`. Подробнее см. [floating-ui documentation](https://floating-ui.com/docs/hide#strategy).

<<< DEMO ./demo/DropdownFloating.vue#template{vue-html}

### Ограничение по границе (Boundary constraint)

По умолчанию выпадающие списки визуально ограничены своими родительскими элементами с обрезкой (clipping ancestors), что подходит в большинстве случаев. Однако если вы размещаете выпадающий список внутри элемента с `overflow: scroll` (или похожим стилем), меню может быть обрезано. Чтобы этого избежать, укажите элемент-границу через пропс `boundary`. Поддерживаются значения из [floating-ui](https://floating-ui.com/)
[Boundary](https://floating-ui.com/docs/detectoverflow#boundary) или [RootBoundary](https://floating-ui.com/docs/detectoverflow#rootboundary). Значение по умолчанию — `clippingAncestors`.

**Примечание:** Если `boundary` отличается от значения по умолчанию (`clippingAncestors`), к корневому элементу выпадающего списка применяется стиль `position: static`, чтобы меню могло «выходить» за пределы контейнера с прокруткой. В некоторых случаях это может повлиять на ваш макет или позиционирование кнопки. В таких случаях оберните выпадающий список в дополнительный элемент.

**Примечание:** BootstrapVueNext использует [floating-ui](https://floating-ui.com/) под капотом, поэтому ознакомьтесь с их [документацией по опциям](https://floating-ui.com/docs/detectoverflow#options) для подробностей о `boundary` и `boundary-padding`.

### Элемент-контейнер

По умолчанию выпадающие списки располагаются рядом с кнопкой-переключателем. Однако вы можете указать контейнер через пропс `container`, куда меню будет телепортироваться. Поддерживаются CSS-селектор, DOM-узел или ссылка на HTML-элемент.

### Автоматическое закрытие

По умолчанию меню выпадающего списка закрывается при клике внутри или вне меню. Вы можете изменить это поведение с помощью пропса `auto-close`.

Пропс `auto-close` поддерживает 4 варианта:

- `true` : меню закроется при клике внутри или вне меню
- `false` : меню закроется только по клику на кнопку-переключатель или вручную через метод hide (также не закроется по клавише <kbd>esc</kbd>)
- `inside` : меню закроется только при клике внутри меню
- `outside` : меню закроется только при клике вне меню

<<< DEMO ./demo/DropdownAutoClose.vue#template{vue-html}

### Расширенная настройка floating-ui

Иногда может понадобиться изменить поведение floating-ui. Некоторые настройки уже доступны через пропсы `no-flip`, `no-shift`, `strategy` и `offset`. Для более низкоуровневого доступа используйте пропс `floatingMiddleware`, чтобы передать middleware для floating-ui.

Подробнее см. [Floating-ui docs](https://floating-ui.com/docs/middleware). Обратите внимание: для прямого использования middleware рекомендуется установить `@floating-ui/vue`.

**Примечание:** Использование пропса `floatingMiddleware` перезапишет другие middleware, такие как `offset`, `noFlip` и `noShift`. Они не объединяются.

## Поддержка разделённой кнопки

Создайте разделённую кнопку выпадающего списка, где левая часть кнопки вызывает событие `split-click` и поддерживает ссылки, а правая часть — это кнопка-переключатель меню.

<<< DEMO ./demo/DropdownSplitButton.vue#template{vue-html}

### Ссылка в разделённой кнопке

Левая часть разделённой кнопки по умолчанию — элемент `<button>` (`BButton`). Чтобы сделать её ссылкой или `RouterLink`, укажите href через пропс `split-href` или ссылку роутера через пропс `split-to`, сохраняя внешний вид кнопки.

<<< DEMO ./demo/DropdownSplitButtonLink.vue#template{vue-html}

### Тип разделённой кнопки

По умолчанию разделённая кнопка имеет тип `button`. Вы можете указать другой тип через пропс `split-button-type`. Поддерживаются: `button`, `submit`, `reset`.

Если заданы пропсы `split-to` или `split-href`, пропс `split-button-type` игнорируется.

## Варианты оформления

Выпадающие списки поддерживают различные пропсы для стилизации кнопки-переключателя.

### Размеры

Выпадающие списки работают с кнопками любого размера, включая обычные и разделённые кнопки.

Установите пропс `size` в `sm` для маленькой кнопки или `lg` для большой.

<<< DEMO ./demo/DropdownSizing.vue#template{vue-html}

**Примечание:** _изменение размера кнопки не влияет на размер пунктов меню!_

### Цветовые варианты

Кнопка-переключатель может иметь любой из стандартных цветовых вариантов Bootstrap, указав пропс `variant` (`success`, `primary`, `info`, `danger`, `link`, `outline-dark` и др., а также пользовательские варианты). По умолчанию используется `secondary`.

См. [Variant Reference](/docs/reference/color-variants) для полного списка встроенных вариантов.

<<< DEMO ./demo/DropdownColorVariants.vue#template{vue-html}

Вы также можете добавить произвольные классы к кнопке через пропс `toggle-class`.

### Цвет разделённой кнопки

По умолчанию левая часть разделённой кнопки использует тот же `variant`, что и кнопка-переключатель. Вы можете задать отдельный вариант через пропс `split-variant`.

<<< DEMO ./demo/DropdownSplitButtonVariant.vue#template{vue-html}

### Тёмный режим

Тёмные варианты для компонентов были удалены в Bootstrap v5.3.0. Подробнее см. [их документацию](https://getbootstrap.su/docs/5.3/components/dropdowns/#dark-dropdowns).

### Блочные выпадающие списки

По умолчанию выпадающие списки ведут себя как кнопки и отображаются inline. Для создания полноширинной «блочной» кнопки добавьте классы `d-grid` и `gap-2` к `BDropdown`. Для разделённых кнопок оберните `BDropdown` в div с этими классами и добавьте `split-class="w-100"` к самому `BDropdown`. Подробнее см. [документацию Bootstrap 5](https://getbootstrap.su/docs/5.3/components/buttons/#block-buttons).

<<< DEMO ./demo/DropdownBlockToggle.vue#template{vue-html}

Если вы хотите, чтобы меню также занимало всю ширину родительского контейнера, добавьте утилитарный класс `w-100` к пропсу `menu-class`.

<<< DEMO ./demo/DropdownBlockMenu.vue#template{vue-html}

### Цветовые варианты подкомпонентов

Многие поддерживаемые [подкомпоненты выпадающего списка](#dropdown-supported-sub-components) имеют пропс `variant` для управления цветом текста.

### Скрытый треугольник

Выпадающий список можно создать с визуально скрытым треугольником (caret) на кнопке, установив пропс `no-caret` в `true`. Это полезно, если выпадающий список отображается как иконка.

<<< DEMO ./demo/DropdownHiddenCaret.vue#template{vue-html}

**Примечание:** Треугольник всегда отображается в режиме разделённой кнопки.

## Поддержка v-model

Состояние открытия выпадающего списка связано с его `v-model`. Программное управление состоянием возможно через модель. Также можно отслеживать состояние выпадающего списка через модель.

<<< DEMO ./demo/DropdownModel.vue

## Экспортируемые методы

Также доступны встроенные методы для показа, скрытия или переключения выпадающего списка через [template refs](https://vuejs.org/guide/essentials/template-refs.html#template-refs):

1. `show`: показать выпадающий список
2. `hide`: скрыть выпадающий список
3. `toggle`: переключить выпадающий список

<<< DEMO ./demo/DropdownMethods.vue

## Поддерживаемые подкомпоненты

Внутрь выпадающего списка можно помещать следующие компоненты. Использование других компонентов или разметки может нарушить верстку и/или навигацию с клавиатуры.

| Подкомпонент                                                   | Описание                                                                                              |
| -------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------- |
| `BDropdownItem`                                                | Пункты меню, поддерживающие клик, ссылки и `RouterLink`/`NuxtLink`. По умолчанию рендерится как `<a>` |
| <span style="white-space:nowrap;">`BDropdownItemButton`</span> | Альтернатива `BDropdownItem`, рендерит пункт меню как элемент `<button>`                              |
| `BDropdownDivider`                                             | Разделитель/отступ для разделения пунктов меню                                                        |
| `BDropdownText`                                                | Произвольный текст в меню                                                                             |
| `BDropdownGroup`                                               | Группировка подкомпонентов с необязательным заголовком                                                |
| `BDropdownHeader`                                              | Заголовок группы пунктов меню                                                                         |
| `BDropdownForm`                                                | Для размещения элементов формы внутри выпадающего меню                                                |

::: warning
_Вложенные подменю **не поддерживаются**._
:::

::: tip
Есть небольшие различия в поведении подкомпонентов, подробнее см. [руководство по миграции](/docs/migration-guide#dropdown-sub-components), если вы переходите с `bootstrap-vue`.
:::

### BDropdownItem

`BDropdownItem` обычно используется для создания навигационной ссылки в меню. Используйте пропс `href` или `to` (для поддержки router-link), чтобы создать нужную ссылку. Если ни `href`, ни `to` не указаны, будет создана стандартная ссылка `<a>` с `href="#"` (и обработчиком, предотвращающим прокрутку страницы).

Отключите пункт меню, установив пропс `disabled`.

<<< DEMO ./demo/DropdownItem.vue#template{vue-html}

### BDropdownItemButton

Ранее содержимое выпадающего меню обязательно было ссылками (`BDropdownItem`), но теперь в Bootstrap v5 можно создавать элементы `<button>` с помощью подкомпонента `BDropdownItemButton`. Он не поддерживает пропсы `href` и `to`.

Отключите кнопку меню, установив пропс `disabled`.

<<< DEMO ./demo/DropdownItemButton.vue#template{vue-html}

Если пункт меню не выполняет навигацию, рекомендуется использовать подкомпонент `BDropdownItemButton`.

### BDropdownDivider

Разделяйте группы связанных пунктов меню с помощью `BDropdownDivider`.

<<< DEMO ./demo/DropdownDivider.vue#template{vue-html}

### BDropdownText

Разместите любой произвольный текст внутри выпадающего меню с помощью подкомпонента `BDropdownText` или используйте текст в сочетании с утилитами для отступов. Обратите внимание, что, возможно, потребуется добавить дополнительные стили для ограничения/установки ширины меню.

<<< DEMO ./demo/DropdownText.vue#template{vue-html}

К `BDropdownText` применяется пользовательский класс BootstrapVueNext `.b-dropdown-text`, который задаёт базовые стили, подходящие в большинстве случаев. По умолчанию ширина будет равна самой широкой строке среди пунктов меню. При необходимости добавьте дополнительные стили или вспомогательные классы.

### BDropdownGroup

Группируйте подкомпоненты выпадающего списка с необязательным заголовком. Разделяйте группы с помощью `BDropdownDivider`.

<<< DEMO ./demo/DropdownGroup.vue#template{vue-html}

### BDropdownHeader

Добавьте заголовок для обозначения секций действий в выпадающем меню.

<<< DEMO ./demo/DropdownHeader.vue#template{vue-html}

Подробнее о доступности заголовков см. раздел [Заголовки и доступность](#headers-and-accessibility).

Использование подкомпонента `BDropdownGroup` упрощает создание доступных сгруппированных пунктов меню с заголовком.

### BDropdownForm

Добавьте форму во выпадающий список с помощью `BDropdownForm`.

<<< DEMO ./demo/DropdownForm.vue#template{vue-html}

Или сделайте её inline.

<<< DEMO ./demo/DropdownInlineForm.vue#template{vue-html}

## Доступность

Указание уникального пропса `id` обеспечивает соответствие ARIA, автоматически добавляя нужные атрибуты `aria-*` в разметку. По умолчанию для каждого выпадающего списка генерируется уникальный id, но его можно переопределить через пропс `id`.

По умолчанию ARIA-роль установлена как `menu`, но вы можете изменить её на другую (например, `navigation`) через пропс `role` в зависимости от задачи.

Если пункт меню не выполняет навигацию, рекомендуется использовать подкомпонент `BDropdownItemButton` (он не объявляется как ссылка), а не `BDropdownItem` (который воспринимается как ссылка).

### Заголовки и доступность

При использовании компонентов `BDropdownHeader` в меню рекомендуется добавить атрибут `id` каждому заголовку, а затем установить атрибут `aria-describedby` (со значением id соответствующего заголовка) для каждого следующего пункта меню под этим заголовком. Это даст пользователям вспомогательных технологий (например, слабовидящим) дополнительный контекст о пункте меню:

<<< DEMO ./demo/DropdownAccessibility.vue#template{vue-html}

В качестве упрощённой альтернативы используйте `BDropdownGroup`, чтобы легко связать текст заголовка с вложенными подкомпонентами.

### Навигация с клавиатуры

Выпадающие списки поддерживают навигацию с клавиатуры, имитируя поведение нативного `<select>`.

Обратите внимание: <kbd>Down</kbd> и <kbd>Up</kbd> не перемещают фокус в подкомпоненты `BDropdownForm`, но пользователь может использовать <kbd>Tab</kbd> или <kbd>Shift</kbd>+<kbd>Tab</kbd> для перехода к элементам формы внутри меню.

## Ленивый рендеринг

Выпадающие меню могут лениво рендерить внутренний контент с помощью пропса `lazy`. По умолчанию это отключено. Для навигационных элементов может быть полезно оставить ленивый рендеринг выключенным, чтобы поисковые роботы могли индексировать навигацию сайта.

<<< DEMO ./demo/DropdownLazy.vue#template{vue-html}

## Особенности реализации

Меню выпадающего списка рендерится с использованием семантических элементов `<ul>` и `<li>` для целей доступности. `.dropdown-menu` — это элемент `<ul>`, а пункты меню (items, buttons, text, form, headers, dividers) обёрнуты в `<li>`. Если вы создаёте собственные элементы для меню, убедитесь, что они обёрнуты в обычный `<li>`.

## См. также

- [`BNavItemDropdown`](/docs/components/nav#dropdown) — поддержка выпадающих списков внутри `BNav` и `BNavbar`
- [Router Link Support](/docs/reference/router-links) — справка по пропсам router-link, доступным в `BDropdownItem`

<ComponentReference :data="data" />

<script setup lang="ts">
import {data} from '../../data/components/dropdown.data'
</script>
