# Группа формы

<PageHeader>

Компонент `BFormGroup` — самый простой способ добавить структуру в формы. Его задача — объединять элементы управления формой с легендой или меткой, а также предоставлять вспомогательный текст, текст для обратной связи о валидности и визуальную (цветовую) индикацию состояния.

</PageHeader>

<<< DEMO ./demo/FormGroupOverview.vue

## Метка

Используйте пропс `label`, чтобы задать содержимое генерируемого элемента `<legend>` или `<label>`, либо именованный слот `label`. Вы также можете визуально скрыть текст метки, оставив его доступным для экранных читалок, установив пропс `label-visually-hidden`.

`BFormGroup` отрисует `<fieldset>` с `<legend>`, если пропс `label-for` не задан. Если для пропса `label-for` указано id инпута, будет отрисован `<div>` с `<label>`.

Если вы укажете значение `id` для пропса `label-for` (этот `id` должен существовать у инпута внутри `BFormGroup`), будет отрисован элемент `<label>` вместо `<legend>`, и атрибут `for` будет установлен в указанный `id`. При указании id **не** добавляйте к нему `#`. Пропс `label-for` следует использовать только если внутри `BFormGroup` один элемент формы. Не используйте пропс `label-for` с компонентами `BFormRadioGroup`, `BFormCheckboxGroup`, `BFormRadio`, `BFormCheckbox` или `BFormFile` (или если в группе несколько инпутов), так как эти компоненты уже содержат встроенные элементы label, и `<legend>` будет более подходящим.

Вы также можете добавить дополнительные классы к метке через пропс `label-class`, например, для управления отступами или выравниванием текста. Пропс `label-class` принимает строку или массив строк.

### Автоматическое наследование id

Компонент `BFormGroup` автоматически наследует id дочерних инпутов, таких как BFormInput и BFormTextarea. Это обеспечивает правильную связь между меткой и полем ввода через атрибут for.

<<< DEMO ./demo/FormGroupId.vue#template{vue-html}

### Горизонтальное расположение

По умолчанию метка располагается над элементом(ами) ввода, но вы можете отобразить их горизонтально (метка слева от инпута) на стандартных брейкпоинтах Bootstrap.

Пропсы `label-cols` и `label-cols-{breakpoint}` позволяют указать, сколько колонок должна занимать метка в строке. Инпут займет оставшуюся ширину. Значение должно быть больше `0`. Также можно установить пропс в `true`, чтобы метка и инпут(ы) занимали по половине ширины строки (удобно, если у вас нестандартное количество колонок), или в `'auto'`, чтобы метка занимала только необходимую ширину.

Также можно указать, сколько колонок занимает содержимое, с помощью пропсов `content-cols` и `content-cols-{breakpoint}`.

Если используете оба пропса (`label-cols` и `content-cols`), убедитесь, что их сумма не превышает `12`.

Подробнее см. в [документации по Grid-системе](/docs/components/grid-system#how-it-works).

| Пропс             | Описание                       |
| ----------------- | ------------------------------ |
| `label-cols`      | Применяется с брейкпоинта `xs` |
| `label-cols-sm`   | Применяется с брейкпоинта `sm` |
| `label-cols-md`   | Применяется с брейкпоинта `md` |
| `label-cols-lg`   | Применяется с брейкпоинта `lg` |
| `label-cols-xl`   | Применяется с брейкпоинта `xl` |
| `content-cols`    | Применяется с брейкпоинта `xs` |
| `content-cols-sm` | Применяется с брейкпоинта `sm` |
| `content-cols-md` | Применяется с брейкпоинта `md` |
| `content-cols-lg` | Применяется с брейкпоинта `lg` |
| `content-cols-xl` | Применяется с брейкпоинта `xl` |

<<< DEMO ./demo/FormGroupHorizontalLayout.vue#template{vue-html}

Вы также можете установить для label-cols значение `'auto'`.

### Размер метки

Вы можете управлять размером текста метки, чтобы он соответствовал размеру инпута, с помощью необязательного пропса `label-size`. Значения: `'sm'` или `'lg'` для маленькой или большой метки соответственно. Размеры работают как для горизонтальных, так и для обычных групп.

<<< DEMO ./demo/FormGroupLabelSize.vue#template{vue-html}

### Выравнивание текста метки

Текст метки можно выровнять по `start`, `center` или `end`, установив соответствующее значение через пропс `label-text-align` и/или `label-align-{breakpoint}`.

| Пропс            | Описание                       |
| ---------------- | ------------------------------ |
| `label-align`    | Применяется с брейкпоинта `xs` |
| `label-align-sm` | Применяется с брейкпоинта `sm` |
| `label-align-md` | Применяется с брейкпоинта `md` |
| `label-align-lg` | Применяется с брейкпоинта `lg` |
| `label-align-xl` | Применяется с брейкпоинта `xl` |

Выравнивание не действует, если установлен пропс `label-visually-hidden`.

## Вложенные группы форм

Вы можете вкладывать компоненты `BFormGroup` для создания сложных макетов форм и семантической группировки связанных элементов:

<<< DEMO ./demo/FormGroupNested.vue#template{vue-html}

## Отключённая группа формы

Установка пропса `disabled` отключает отрисованный `<fieldset>`, а в большинстве браузеров — и все инпуты внутри него.

`disabled` не действует, если задан `label-for` (в этом случае `<fieldset>` не отрисовывается).

## Обратная связь о состоянии валидации

Bootstrap поддерживает стили валидации для состояний `valid` и `invalid` для большинства элементов формы.

Обычно рекомендуется использовать определённое состояние для разных типов обратной связи:

- `false` (некорректное состояние) — для обязательных или блокирующих полей. Пользователь должен корректно заполнить это поле для отправки формы
- `true` (корректное состояние) — для поэтапной валидации, чтобы поощрять пользователя при заполнении формы
- `null` — не отображает состояние валидации

Чтобы применить одну из иконок состояния к `BFormGroup`, установите пропс `state` в `false` (некорректно), `true` (корректно) или `null` (без состояния).

Bootstrap v5 использует соседние CSS-селекторы `:invalid` или `:valid` для отображения текста обратной связи. Некоторые элементы (чекбоксы, радиокнопки, инпуты файлов, инпуты внутри input-group) обёрнуты в дополнительную разметку, из-за чего текст обратной связи уже не является соседом инпута, и обратная связь не отображается. В таких случаях необходимо установить состояние валидации и на `BFormGroup`, и на сам инпут.

Обратная связь будет показана, если у родительского компонента `BForm` не установлен пропс `novalidate` (или он равен `false`) и установлен пропс `validated` (и инпут проходит или не проходит нативную валидацию браузера, например, по `required`). Подробнее см. в [документации Bootstrap 5 по валидации форм](https://getbootstrap.su/docs/5.3/forms/validation).

При установке состояния `invalid` всегда добавляйте содержимое через пропс (или слот) `invalid-feedback`, чтобы помочь пользователям с особыми возможностями.

### Автоматическая передача состояния дочернему элементу

Для некоторых элементов дочерний инпут автоматически получает состояние группы. Например, `:state="false"` на `BFormGroup` автоматически добавит нужный класс инпуту. Явное указание пропса `state` на дочернем элементе переопределяет это поведение.

<<< DEMO ./demo/FormGroupState.vue#template{vue-html}

### Некорректная обратная связь

Покажите текст обратной связи для некорректного состояния (поддерживается html), установив пропс `invalid-feedback` или используя именованный слот `invalid-feedback`.

Обратная связь отображается с помощью подкомпонента [`BFormInvalidFeedback`](/docs/components/form#helper-components).

### Корректная обратная связь

Покажите текст обратной связи для корректного состояния (поддерживается html), установив пропс `valid-feedback` или используя именованный слот `valid-feedback`.

Обратная связь отображается с помощью подкомпонента [`BFormValidFeedback`](/docs/components/form#helper-components).

### Стиль обратной связи

По умолчанию обратная связь (valid или invalid) отображается как блок текста. Можно изменить стиль на статический tooltip, установив пропс `tooltip` в `true`.

### Ограничения обратной связи

::: Info NOTE
Если вы используете внутри `BFormGroup` компоненты `BInputGroup`, `BFormFile`, `BFormRadioGroup`, `BFormRadio`, `BFormCheckboxGroup` или `BFormCheckbox`, установка состояния только на инпут **не** вызовет отображение обратной связи (из-за ограничений CSS Bootstrap 5). Чтобы обойти это, **необходимо также** установить состояние на `BFormGroup`. Нативная валидация браузера также **не** вызовет отображение обратной связи для этих компонентов.
:::

## Плавающие метки

BFormGroup поддерживает новую функцию [Плавающие метки](https://getbootstrap.su/docs/5.3/forms/floating-labels/) из Bootstrap 5.

Вы можете сделать плавающую метку, установив пропс `floating` в true и указав placeholder у `BFormInput`.

### Пример

<<< DEMO ./demo/FormGroupFloatingLabels.vue

### Ограничения

Есть ограничения на использование плавающих меток:

- Плавающие метки не работают в горизонтальном расположении. Горизонтальное расположение имеет приоритет над свойством `floating`. Не задавайте пропсы `content-cols-` или `label-cols-`, если хотите использовать плавающие метки.
- У `BFormInput` обязательно должен быть задан placeholder.

## Доступность

По умолчанию, если не задано значение `label-for`, `BFormGroup` рендерит элементы управления внутри `<fieldset>`, а содержимое метки — внутри `<legend>`. Такая разметка автоматически связывает легенду с вложенными элементами.

**Настоятельно рекомендуется** указывать уникальный пропс `id` на вашем инпуте и устанавливать пропс `label-for` в это значение, если в группе только один инпут.

Если в `BFormGroup` несколько элементов (например, группа radio или checkbox, или несколько связанных инпутов), **не устанавливайте** пропс `label-for`, так как метка может быть связана только с одним инпутом. Лучше использовать стандартную разметку с `<fieldset>` и `<legend>`, чтобы описать группу элементов.

Если в группе несколько элементов (и вы не вкладываете другие `BFormGroup`), рекомендуется для каждого элемента добавить свою метку (её можно визуально скрыть с помощью класса `.visually-hidden`) и установить атрибут `for` в id соответствующего инпута. Либо можно использовать атрибут `aria-label` на каждом инпуте. Для `BFormRadio` и `BFormCheckbox` (и их групп) отдельные метки не нужны, так как они уже содержат label.

Если у `BFormGroup` задан пропс `label-for`, атрибут `aria-describedby` будет автоматически назначен инпуту. Если в группе несколько элементов, назначайте этот атрибут каждому элементу вручную через значение пропса `ariaDescribedby` из опционального scoped-слота `default`.

<ComponentReference :data="data" />

<script setup lang="ts">
import {data} from '../../data/components/formGroup.data'
</script>
