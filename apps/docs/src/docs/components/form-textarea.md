# Многострочное поле формы

<PageHeader>

Создавайте многострочные поля ввода с поддержкой автоизменения высоты, минимального и максимального количества строк и контекстных состояний.

</PageHeader>

<<< DEMO ./demo/TextareaOverview.vue

## Размеры поля

Задайте высоту текста с помощью пропса `size`: `sm` или `lg` для маленького или большого размера соответственно.

Для управления шириной поместите поле в стандартную колонку Bootstrap.

<<< DEMO ./demo/TextareaSizing.vue#template{vue-html}

## Количество отображаемых строк

Чтобы задать высоту `BFormTextarea`, используйте пропс `rows` с нужным количеством строк. Если не указано, по умолчанию будет `2` (минимально допустимое значение). Значение ниже 2 или null также приведёт к использованию значения 2.

<<< DEMO ./demo/TextareaDisplayedRows.vue#template{vue-html}

### Отключение ручного изменения размера

В некоторых браузерах пользователь может изменять высоту textarea вручную. Чтобы отключить это, установите пропс `no-resize` в `true`.

<<< DEMO ./demo/TextareaResizeHandle.vue#template{vue-html}

### Автовысота

`<BFormTextarea>` может автоматически подстраивать высоту (число строк) под содержимое, даже при вводе или удалении текста. Высота будет увеличиваться или уменьшаться (до максимума `max-rows` или минимума `rows`).

Для задания минимальной высоты используйте пропс `rows` (или оставьте по умолчанию 2). Максимальное число строк задаётся через пропс `max-rows`.

Чтобы высота не уменьшалась (только росла), установите пропс `no-auto-shrink` в `true`. Пропс `no-auto-shrink` не действует, если `max-rows` не задан или меньше/равен `rows`.

Обратите внимание: если включён режим авто-высоты, ручное изменение размера textarea (если поддерживается браузером) будет отключено автоматически.

<<< DEMO ./demo/TextareaAutoHeight.vue#template{vue-html}

## Контекстные состояния

Bootstrap поддерживает стили валидации для состояний `valid` и `invalid` для большинства элементов формы.

Обычно рекомендуется использовать определённое состояние для разных типов обратной связи:

- `false` (некорректное состояние) — для обязательных или блокирующих полей. Пользователь должен корректно заполнить это поле для отправки формы
- `true` (корректное состояние) — для поэтапной валидации, чтобы поощрять пользователя при заполнении формы
- `null` — не отображает состояние валидации

Чтобы применить одну из иконок состояния к `BFormTextarea`, установите пропс `state` в `false` (некорректно), `true` (корректно) или `null` (без состояния).

<<< DEMO ./demo/TextareaStates.vue

### Передача состояния вспомогательным технологиям и людям с дальтонизмом

Использование только цветовой индикации состояния не даст информации пользователям вспомогательных технологий (например, экранных читалок) и людям с дальтонизмом.

Обеспечьте альтернативную индикацию состояния. Например, добавьте подсказку в текст метки или отдельный блок с пояснением.

### Атрибут `aria-invalid`

Если у `BFormTextarea` некорректное состояние (`state` равен `false`), рекомендуется также установить пропс `aria-invalid` в `true` или одно из поддерживаемых значений:

- `false`: Нет ошибок (по умолчанию)
- `true` или `'true'`: Значение не прошло валидацию
- `'grammar'`: Обнаружена грамматическая ошибка
- `'spelling'`: Обнаружена орфографическая ошибка

Если пропс `state` равен `false`, а `aria-invalid` не задан явно, компонент автоматически установит атрибут `aria-invalid` в `'true'`.

## Поддержка форматирования

`BFormTextarea` поддерживает форматирование значения через функцию, переданную в пропс `formatter`.

Форматирование (если функция задана) происходит при срабатывании событий `input` и `change`. Можно ограничить форматирование только событием `blur`, установив булевый пропс `lazy-formatter`.

Функция `formatter` получает два аргумента: исходное значение поля и объект события (если есть).

Функция должна возвращать отформатированное значение в виде _строки_.

Если функция не задана, форматирование не выполняется.

<<< DEMO ./demo/TextareaFormatter.vue

**Примечание:** При не ленивом форматировании, если курсор не в конце значения, он может перескочить в конец после ввода символа. Используйте объект события и `event.target` для управления положением курсора. Это остаётся на усмотрение разработчика.

## Только для чтения (plain text)

Если вы хотите, чтобы `<BFormTextarea readonly>` отображался как обычный текст, установите пропс `plaintext` (не обязательно указывать `readonly`, он будет установлен автоматически). Это уберёт стандартное оформление поля и сохранит правильный размер текста, отступы и высоту.

<<< DEMO ./demo/TextareaReadonly.vue

## Плавающие метки

Если используете [плавающие метки](/docs/components/form#floating-labels) в `BFormTextsArea`, не используйте свойство `rows` для задания высоты. Вместо этого задайте явную высоту (через style или CSS), как указано в [документации Bootstrap 5](https://getbootstrap.su/docs/5.3/forms/floating-labels/#textareas).

<<< DEMO ./demo/TextareaFloatingLabels.vue

## Модификаторы v-model

Поддерживаются нативные модификаторы [`trim`, `lazy`, и `number`](https://vuejs.org/guide/essentials/forms.html#modifiers). Они работают так же, как описано в документации Vue.js, поэтому отдельные свойства `trim`, `lazy` или `number` (как в BSV) больше не нужны.

## Поддержка debounce

В качестве альтернативы пропсу `lazy` `<BFormTextarea>` поддерживает debounce: обновление `v-model` происходит после паузы между вводом символов (или событием `change`). Если пользователь вводит новый символ (или удаляет), таймер сбрасывается.

Чтобы включить debounce, установите пропс `debounce` в любое целое число больше нуля (миллисекунды). Значение `0` отключает debounce.

Примечание: debounce **не** работает, если установлен пропс `lazy`.

<<< DEMO ./demo/TextareaDebounce.vue

## Автофокус

Если пропс `autofocus` установлен на `BFormTextarea`, textarea будет автоматически в фокусе при вставке (монтировании) в документ или повторной активации внутри компонента Vue `KeepAlive`. Обратите внимание: этот пропс **не** устанавливает атрибут `autofocus` на textarea и не отслеживает её появление.

## Нативные и кастомные события

Поддерживаются все нативные события без необходимости использовать модификатор `.native`.

См. [руководство по миграции](/docs/migration-guide#bform-components) для изменений в обработке событий `change` и `input` по сравнению с bootstrap-vue.

## Доступ к свойствам и методам поля

`BFormInput` предоставляет доступ к нативному элементу input ([HTMLInputElement](https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement)) через ссылку с именем `element`. Вы можете использовать эту ссылку для доступа к свойствам и методам элемента.

Например: `<BFormInput ref="foo" ... />`, `const foo = ref<InstanceType<typeof BFormInput> | null>(null)`, затем
`foo?.value?.element?.methodName` или `foo?.value?.element?.propertyName`

<<< DEMO ./demo/TextareaProperties.vue

### Свойства поля

| Свойство              | Описание      |
| --------------------- | ------------- |
| `.selectionStart`     | Чтение/запись |
| `.selectionEnd`       | Чтение/запись |
| `.selectionDirection` | Чтение/запись |
| `.validity`           | Только чтение |
| `.validationMessage`  | Только чтение |
| `.willValidate`       | Только чтение |

### Методы поля

| Метод                  | Описание            |
| ---------------------- | ------------------- |
| `.focus()`             | Фокусирует поле     |
| `.blur()`              | Снимает фокус       |
| `.select()`            | Выделяет весь текст |
| `.setSelectionRange()` |                     |
| `.setRangeText()`      |                     |
| `.setCustomValidity()` |                     |
| `.checkValidity()`     |                     |
| `.reportValidity()`    |                     |

Подробнее: [https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement]. Поддержка зависит от типа поля.

<ComponentReference :data="data" />

<script setup lang="ts">
import {data} from '../../data/components/formTextarea.data'
</script>
