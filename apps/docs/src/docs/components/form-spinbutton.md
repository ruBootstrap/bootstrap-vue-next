# Спиннер формы

<PageHeader>

Спиннер формы позволяет пользователю изменять числовое значение в заданном диапазоне с точным контролем

</PageHeader>

## Обзор

Компонент `BFormSpinbutton` [соответствует WAI-ARIA](https://www.w3.org/TR/wai-aria-practices-1.2/#spinbutton), поддерживает [управление с клавиатуры](#accessibility) и может быть горизонтальным (по умолчанию) или вертикальным

Как и поля типа range, спиннер `BFormSpinbutton` не позволяет пользователю вводить значение вручную

<<< DEMO ./demo/FormSpinbuttonOverview.vue

Клавиши <kbd>ArrowUp</kbd> и <kbd>ArrowDown</kbd> используются для увеличения и уменьшения значения

Чтобы значение спиннера отправлялось при нативной отправке формы, необходимо задать имя через пропс `name`. Это создаст скрытое поле с текущим значением спиннера. Если значение не задано, скрытое поле будет содержать пустую строку

## Значение v-model

`v-model` всегда возвращает значение как число. Если начальное значение не задано, `v-model` может быть `null`

Если начальное значение `null`, спиннер не отображает значение. Используйте пропс `placeholder`, чтобы показать строку, когда значение отсутствует

## Min, max и step

По умолчанию диапазон спиннера — от `1` до `100`, его можно изменить через пропсы `min` и `max`. Шаг по умолчанию — `1`, его можно изменить через пропс `step` (допустимы дробные значения)

<<< DEMO ./demo/FormSpinbuttonStep.vue#template{vue-html}

## Зацикливание значений

По умолчанию, если значение достигло `max`, дальнейшее увеличение не изменит его. Аналогично, при достижении `min` уменьшение не сработает

Чтобы разрешить зацикливание (от max к min и наоборот), установите пропс `wrap` в true

<<< DEMO ./demo/FormSpinbuttonWrapping.vue#template{vue-html}

## Стилизация

### Размеры

Как и другие элементы формы, `BFormSpinbutton` поддерживает маленький и большой размер через пропс `size` (`'sm'` или `'lg'`)

<<< DEMO ./demo/FormSpinbuttonSizing.vue#template{vue-html}

### В одну строку

<<< DEMO ./demo/FormSpinbuttonInline.vue#template{vue-html}

Спиннер автоматически подстраивает ширину под отображаемое значение. Подробнее о контроле ширины см. раздел [Ширина](#width)

### Вертикальный режим

Спиннеры могут быть вертикальными:

<<< DEMO ./demo/FormSpinbuttonVertical.vue#template{vue-html}

Вертикальные спиннеры также поддерживают пропс `size`. В вертикальном режиме спиннер отображается как inline-элемент

Ширина спиннера автоматически подстраивается под значение. Подробнее о контроле ширины см. раздел [Ширина](#width)

### Ширина

Если не установлен `vertical` или `inline`, элемент расширяется на всю ширину контейнера. Для управления шириной используйте утилитарные классы (`w-25`, `w-50`, `w-75`) или стили

Если установлен `vertical` или `inline`, ширина подстраивается под значение. Для управления шириной используйте CSS (например, `style="width: 10rem"`)

### Форматирование числа и локаль

По умолчанию `BFormSpinbutton` форматирует число в соответствии с локалью браузера пользователя. Можно изменить локализацию, указав locale (или массив локалей) через пропс `locale`. Форматирование выполняется через Intl.NumberFormat. Доступные локали зависят от браузера. Локализация влияет только на отображение, не на значение v-model

<<< DEMO ./demo/FormSpinbuttonFormatting.vue

Также можно передать свою функцию форматирования через пропс `formatter-fn`. Функция получает текущее значение и возвращает строку для отображения. Это удобно для вывода текста вместо числа или для расширенного форматирования через Intl.NumberFormat. Форматтер влияет только на отображение, не на v-model

### Кастомный форматтер

<<< DEMO ./demo/FormSpinbuttonCustomFormatting.vue

## Состояния disabled и readonly

<<< DEMO ./demo/FormSpinbuttonReadonly.vue

## Стили валидации

Если по умолчанию значение null и пользователь не выбрал значение, можно использовать пропс `state` для применения стилей валидации:

- `true` — применяет стиль valid
- `false` — применяет стиль invalid
- `null` — не применяет стили (по умолчанию)

## Пропс required

Обратите внимание: пропс `required` только добавляет атрибут `aria-required="true"` и не выполняет валидацию при отправке формы. Валидацию v-model нужно реализовать самостоятельно

Если установлен пропс `required` и v-model равен null, компоненту будет добавлен атрибут `aria-invalid="true"`

## События

Событие `update:model-value` используется для обновления v-model и срабатывает при каждом изменении значения

Событие `change` срабатывает при отпускании кнопки мыши (при нажатии на кнопки увеличения/уменьшения) или при отпускании клавиш <kbd>ArrowDown</kbd> или <kbd>ArrowUp</kbd>. Это удобно для debounce

В следующем примере показана разница между событиями `update:model-value` и `change`. Зажмите кнопку увеличения/уменьшения или используйте стрелки вверх/вниз

<<< DEMO ./demo/FormSpinbuttonEvents.vue

## Доступность

Доступны следующие клавиши при фокусе на спиннере:

- <kbd>Home</kbd> — установить значение в `min`
- <kbd>End</kbd> — установить значение в `max`
- <kbd>ArrowUp</kbd> — увеличить значение на шаг
- <kbd>ArrowDown</kbd> — уменьшить значение на шаг
- <kbd>PageUp</kbd> — увеличить значение на шаг, умноженный на `repeat-step-multiplier`
- <kbd>PageDown</kbd> — уменьшить значение на шаг, умноженный на `repeat-step-multiplier`

Обратите внимание: параметры `repeat-delay`, `repeat-threshold` и `repeat-interval` применяются только к клавишам <kbd>ArrowUp</kbd> и <kbd>ArrowDown</kbd>

<ComponentReference :data="data" />

<script setup lang="ts">
import {data} from '../../data/components/formSpinbutton.data'
</script>
